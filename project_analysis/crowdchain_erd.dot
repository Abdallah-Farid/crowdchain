digraph CrowdChainERD {
  graph [pad="0.5", nodesep="0.5", ranksep="2"];
  node [shape=plain]
  rankdir=LR;

  Users [label=<
    <table border="0" cellborder="1" cellspacing="0">
      <tr><td bgcolor="lightblue" colspan="2"><b>Users</b></td></tr>
      <tr><td port="id"><b>PK</b></td><td>id</td></tr>
      <tr><td></td><td>wallet_address</td></tr>
      <tr><td></td><td>username</td></tr>
      <tr><td></td><td>email</td></tr>
      <tr><td></td><td>avatar_url</td></tr>
      <tr><td></td><td>bio</td></tr>
      <tr><td></td><td>created_at</td></tr>
      <tr><td></td><td>updated_at</td></tr>
    </table>
  >];

  Projects [label=<
    <table border="0" cellborder="1" cellspacing="0">
      <tr><td bgcolor="lightblue" colspan="2"><b>Projects</b></td></tr>
      <tr><td port="id"><b>PK</b></td><td>id</td></tr>
      <tr><td></td><td>blockchain_id</td></tr>
      <tr><td port="owner_id"><b>FK</b></td><td>owner_id</td></tr>
      <tr><td></td><td>title</td></tr>
      <tr><td></td><td>description</td></tr>
      <tr><td></td><td>image_url</td></tr>
      <tr><td></td><td>target_amount</td></tr>
      <tr><td></td><td>deadline</td></tr>
      <tr><td></td><td>status</td></tr>
      <tr><td></td><td>category</td></tr>
      <tr><td></td><td>tags</td></tr>
      <tr><td></td><td>created_at</td></tr>
      <tr><td></td><td>updated_at</td></tr>
    </table>
  >];

  Milestones [label=<
    <table border="0" cellborder="1" cellspacing="0">
      <tr><td bgcolor="lightblue" colspan="2"><b>Milestones</b></td></tr>
      <tr><td port="id"><b>PK</b></td><td>id</td></tr>
      <tr><td port="project_id"><b>FK</b></td><td>project_id</td></tr>
      <tr><td></td><td>title</td></tr>
      <tr><td></td><td>description</td></tr>
      <tr><td></td><td>amount</td></tr>
      <tr><td></td><td>due_date</td></tr>
      <tr><td></td><td>status</td></tr>
      <tr><td></td><td>completion_proof</td></tr>
      <tr><td></td><td>order_number</td></tr>
      <tr><td></td><td>created_at</td></tr>
      <tr><td></td><td>updated_at</td></tr>
    </table>
  >];

  Pledges [label=<
    <table border="0" cellborder="1" cellspacing="0">
      <tr><td bgcolor="lightblue" colspan="2"><b>Pledges</b></td></tr>
      <tr><td port="id"><b>PK</b></td><td>id</td></tr>
      <tr><td port="backer_id"><b>FK</b></td><td>backer_id</td></tr>
      <tr><td port="project_id"><b>FK</b></td><td>project_id</td></tr>
      <tr><td></td><td>blockchain_id</td></tr>
      <tr><td></td><td>amount</td></tr>
      <tr><td></td><td>status</td></tr>
      <tr><td></td><td>created_at</td></tr>
      <tr><td></td><td>updated_at</td></tr>
    </table>
  >];

  MilestoneDisbursements [label=<
    <table border="0" cellborder="1" cellspacing="0">
      <tr><td bgcolor="lightblue" colspan="2"><b>MilestoneDisbursements</b></td></tr>
      <tr><td port="id"><b>PK</b></td><td>id</td></tr>
      <tr><td port="milestone_id"><b>FK</b></td><td>milestone_id</td></tr>
      <tr><td></td><td>tx_hash</td></tr>
      <tr><td></td><td>amount</td></tr>
      <tr><td></td><td>status</td></tr>
      <tr><td></td><td>disbursement_date</td></tr>
      <tr><td></td><td>created_at</td></tr>
      <tr><td></td><td>updated_at</td></tr>
    </table>
  >];

  MilestoneVotes [label=<
    <table border="0" cellborder="1" cellspacing="0">
      <tr><td bgcolor="lightblue" colspan="2"><b>MilestoneVotes</b></td></tr>
      <tr><td port="id"><b>PK</b></td><td>id</td></tr>
      <tr><td port="milestone_id"><b>FK</b></td><td>milestone_id</td></tr>
      <tr><td port="user_id"><b>FK</b></td><td>user_id</td></tr>
      <tr><td></td><td>vote</td></tr>
      <tr><td></td><td>comment</td></tr>
      <tr><td></td><td>created_at</td></tr>
      <tr><td></td><td>updated_at</td></tr>
    </table>
  >];

  BlockchainTransactions [label=<
    <table border="0" cellborder="1" cellspacing="0">
      <tr><td bgcolor="lightblue" colspan="2"><b>BlockchainTransactions</b></td></tr>
      <tr><td port="id"><b>PK</b></td><td>id</td></tr>
      <tr><td port="user_id"><b>FK</b></td><td>user_id</td></tr>
      <tr><td></td><td>tx_hash</td></tr>
      <tr><td></td><td>tx_type</td></tr>
      <tr><td></td><td>amount</td></tr>
      <tr><td></td><td>status</td></tr>
      <tr><td></td><td>created_at</td></tr>
      <tr><td></td><td>updated_at</td></tr>
    </table>
  >];

  ProjectUpdates [label=<
    <table border="0" cellborder="1" cellspacing="0">
      <tr><td bgcolor="lightblue" colspan="2"><b>ProjectUpdates</b></td></tr>
      <tr><td port="id"><b>PK</b></td><td>id</td></tr>
      <tr><td port="project_id"><b>FK</b></td><td>project_id</td></tr>
      <tr><td port="user_id"><b>FK</b></td><td>user_id</td></tr>
      <tr><td></td><td>title</td></tr>
      <tr><td></td><td>content</td></tr>
      <tr><td></td><td>created_at</td></tr>
      <tr><td></td><td>updated_at</td></tr>
    </table>
  >];

  Comments [label=<
    <table border="0" cellborder="1" cellspacing="0">
      <tr><td bgcolor="lightblue" colspan="2"><b>Comments</b></td></tr>
      <tr><td port="id"><b>PK</b></td><td>id</td></tr>
      <tr><td port="project_id"><b>FK</b></td><td>project_id</td></tr>
      <tr><td port="user_id"><b>FK</b></td><td>user_id</td></tr>
      <tr><td></td><td>content</td></tr>
      <tr><td></td><td>created_at</td></tr>
      <tr><td></td><td>updated_at</td></tr>
    </table>
  >];


  // Relationships
  Users:id -> Projects:owner_id [arrowhead=crow, arrowtail=none, dir=both];
  Users:id -> Pledges:backer_id [arrowhead=crow, arrowtail=none, dir=both];
  Users:id -> MilestoneVotes:user_id [arrowhead=crow, arrowtail=none, dir=both];
  Users:id -> BlockchainTransactions:user_id [arrowhead=crow, arrowtail=none, dir=both];
  Users:id -> ProjectUpdates:user_id [arrowhead=crow, arrowtail=none, dir=both];
  Users:id -> Comments:user_id [arrowhead=crow, arrowtail=none, dir=both];
  
  Projects:id -> Milestones:project_id [arrowhead=crow, arrowtail=none, dir=both];
  Projects:id -> Pledges:project_id [arrowhead=crow, arrowtail=none, dir=both];
  Projects:id -> ProjectUpdates:project_id [arrowhead=crow, arrowtail=none, dir=both];
  Projects:id -> Comments:project_id [arrowhead=crow, arrowtail=none, dir=both];
  
  Milestones:id -> MilestoneDisbursements:milestone_id [arrowhead=crow, arrowtail=none, dir=both];
  Milestones:id -> MilestoneVotes:milestone_id [arrowhead=crow, arrowtail=none, dir=both];
}
